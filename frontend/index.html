<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWMS - Command Center</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=jetbrains+mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="overlay-grid"></div>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="brand">
                <div class="logo-icon pulsing">
                    <i data-lucide="activity"></i>
                </div>
                <div>
                    <h1>SWMS</h1>
                    <span class="subtitle">CMD CENTER</span>
                </div>
            </div>

            <ul class="nav-links">
                <li class="active"><a href="#"><i data-lucide="layout-grid"></i> Overview</a></li>
                <li><a href="#"><i data-lucide="map"></i> Sector Map</a></li>
                <li><a href="#"><i data-lucide="sliders"></i> Controls</a></li>
                <li><a href="#"><i data-lucide="file-warning"></i> Incident Log</a></li>
            </ul>

            <div class="system-status-panel">
                <h4>System Integrity</h4>
                <div class="health-bar-container">
                    <div class="health-bar" style="width: 100%"></div>
                </div>
                <small id="uptime-counter">UPTIME: 00:00:00</small>
            </div>
        </nav>

        <!-- Main Command Interface -->
        <main class="main-content">
            <header class="top-bar">
                <div class="breadcrumb">
                    <i data-lucide="chevron-right"></i> MAIN_GRID // REAL_TIME_MONITORING
                </div>
                <div class="clock" id="world-clock">00:00:00 UTC</div>
            </header>

            <div class="command-grid">
                <!-- LEFT COLUMN: MAP & SENSORS -->
                <div class="grid-col-left">
                    <!-- Sector Map Card -->
                    <div class="card map-card">
                        <div class="card-header">
                            <h3><i data-lucide="map-pin"></i> INFRASTRUCTURE MAP</h3>
                            <span class="status-badge" id="map-status">LIVE</span>
                        </div>
                        <div class="map-visualizer" id="sector-map">
                            <!-- Visual Zones (Pump Station, Distribution, Treatment) -->
                            <div class="zone zone-1" title="Pump Station Alpha">
                                <i data-lucide="fan"></i>
                            </div>
                            <div class="pipe pipe-1"></div>
                            <div class="zone zone-2" title="Main Tank Reservoir">
                                <i data-lucide="cylinder"></i>
                                <div class="water-level-indicator"></div>
                            </div>
                            <div class="pipe pipe-2"></div>
                            <div class="zone zone-3" title="City Distribution">
                                <i data-lucide="building-2"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Key Metrics (KPIs) -->
                    <div class="kpi-grid">
                        <div class="card kpi-card">
                            <span class="label">SYS PRESSURE</span>
                            <div class="value-group">
                                <span class="value" id="pressure-val">0.0</span>
                                <span class="unit">PSI</span>
                            </div>
                            <div class="mini-chart" id="pressure-sparkline"></div>
                        </div>
                        <div class="card kpi-card">
                            <span class="label">FLOW RATE</span>
                            <div class="value-group">
                                <span class="value" id="flow-val">0.0</span>
                                <span class="unit">L/m</span>
                            </div>
                        </div>
                        <div class="card kpi-card danger">
                            <span class="label">ACTIVE ALERTS</span>
                            <div class="value-group">
                                <span class="value text-red" id="alert-val">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RIGHT COLUMN: CONTROLS & ANALYTICS -->
                <div class="grid-col-right">
                    <!-- Manual Controls -->
                    <div class="card control-panel">
                        <div class="card-header">
                            <h3><i data-lucide="settings-2"></i> MANUAL OVERRIDE</h3>
                        </div>
                        <div class="control-group">
                            <div class="control-item">
                                <label>MAIN PUMP (P-101)</label>
                                <label class="switch">
                                    <input type="checkbox" id="btn-pump-main">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <div class="control-item">
                                <label>AUX PUMP (P-102)</label>
                                <label class="switch">
                                    <input type="checkbox" id="btn-pump-aux">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <div class="control-item">
                                <label>EMERGENCY VALVE</label>
                                <label class="switch danger">
                                    <input type="checkbox" id="btn-valve-emergency">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Area -->
                    <div class="card chart-card">
                        <div class="card-header">
                            <h3><i data-lucide="bar-chart-2"></i> HYDRAULIC ANALYTICS</h3>
                            <div class="chart-toggles">
                                <button class="active">Pressure</button>
                                <button>Flow</button>
                            </div>
                        </div>
                        <div class="canvas-container">
                            <canvas id="mainChart"></canvas>
                        </div>
                    </div>

                    <!-- Simulation Events -->
                    <div class="card events-card">
                        <div class="card-header">
                            <h3><i data-lucide="zap"></i> SIMULATION EVENTS</h3>
                        </div>
                        <div class="button-grid">
                            <button class="event-btn warning" onclick="sim.triggerLeak()">TRIGGER LEAK</button>
                            <button class="event-btn info" onclick="sim.rainEvent()">HEAVY RAIN</button>
                            <button class="event-btn success" onclick="sim.stabilize()">STABILIZE</button>
                        </div>
                        <div class="log-console" id="console-log">
                            <p class="log-line">System initialized.</p>
                            <p class="log-line">Waiting for operator input...</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>